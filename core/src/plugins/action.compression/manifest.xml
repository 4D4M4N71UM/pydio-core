<?xml version="1.0" encoding="UTF-8"?>
<ajxp_plugin  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="file:../core.ajaxplorer/ajxp_registry.xsd"
              name="compression" enabled="true" label="CONF_MESSAGE[Tar Archives Support]"
              description="CONF_MESSAGE[Create and extract tar, tar.gz and tar.bz2 archives.]" >

    <client_settings>
        <resources>
            <i18n namespace="compression" path="plugins/action.compression/res/i18n"/>
            <js className="CompressionActions" file="plugins/action.compression/res/build/CompressionActions.js"/>
        </resources>
    </client_settings>

	<registry_contributions>
        <extensions>
            <extension mime="tar" font="archive" icon="archive.png" messageId="61"/>
            <extension mime="bz2" font="archive" icon="archive.png" messageId="61"/>
        </extensions>
        <actions>
            <action name="compression">
                <processing>
                    <serverCallback methodName="receiveAction"/>
                </processing>
            </action>
            <action name="compress_ui">
                <processing>
                    <clientCallback module="CompressionActions.Callbacks.compressUI" prepareModal="true"/>
                    <clientForm id="compression_form"><![CDATA[
                        <div id="compression_form" action="compression" box_width="272">
                            <label class="dialogLegend" id="type_archive" style="display: inline-block;margin-top: 11px;">AJXP_MESSAGE[compression.3]</label>
                            <select style="width:100px;"  name="type_archive" id="type_archive" class="dialogFocus initFicName">
                                <option value=".tar">TAR</option>
                                <option value=".tar.gz">TAR.GZ</option>
                                <option value=".tar.bz2">TAR.BZ2</option>
                            </select>
                            <br/>
                            <label class="dialogLegend" for="archive_name"  style="display: inline-block;margin-top: 11px;">AJXP_MESSAGE[compression.4]</label>
                            <br/>
                            <input style="width: 93%;margin-left: 9px;margin-top: 7px; margin-bottom:12px;" type="text" name="archive_name" id="archive_name" class="dialogFocus initFicName" />
                        </div>
				]]></clientForm>
                </processing>
            </action>
            <action name="extraction">
                <gui text="compression.9" title="compression.10" src="archive_insert.png" iconClass="icon-briefcase" accessKey="" hasAccessKey="false">
                    <context selection="true" dir="true" recycle="hidden"
                             actionBar="true" contextMenu="true" infoPanel="false"
                             actionBarGroup="change" inZip="false">
                    </context>
                    <selectionContext dir="false" file="true" recycle="false" unique="true" allowedMimes="tar,gz,bz2"/>
                </gui>
                <processing>
                    <clientCallback module="CompressionActions.Callbacks.extract" prepareModal="false"/>
                    <serverCallback methodName="receiveAction" pluginId="action.compression" />
                </processing>
            </action>
        </actions>
	</registry_contributions>
	<class_definition filename="plugins/action.compression/PluginCompression.php" classname="Pydio\Action\Compression\PluginCompression"/>
    <dependencies>
        <activePlugin pluginName="access.fs"/>
    </dependencies>
</ajxp_plugin>
